{"version":3,"sources":["web/static/client/js/actions/cart.js","web/static/client/js/actions/cart_notification.js","web/static/client/js/actions/product.js","web/static/client/js/app.js","web/static/client/js/components/cart_modal.js","web/static/client/js/components/cart_notification.js","web/static/client/js/components/dismissable_alert.js","web/static/client/js/components/index.js","web/static/client/js/components/mini_cart.js","web/static/client/js/components/product.js","web/static/client/js/components/product_listing.js","web/static/client/js/components/stacked_alerts.js","web/static/client/js/constants/index.js","web/static/client/js/lib/ajax_setup.js","web/static/client/js/listeners/cart_notification_listener.js","web/static/client/js/reducers/cart.js","web/static/client/js/reducers/cart_notification.js","web/static/client/js/reducers/index.js","web/static/client/js/reducers/product.js","web/static/client/js/socket.js","web/static/client/js/store/index.js","web/static/client/js/utils/index.js","web/static/client/js/views/base_view.js","web/static/client/js/views/checkout/base_checkout_view.js","web/static/client/js/views/checkout/checkout_view.js","web/static/client/js/views/checkout/index.js","web/static/client/js/views/checkout/payment.js","web/static/client/js/views/index.js","web/static/client/js/views/products/base_product_view.js","web/static/client/js/views/products/index.js","web/static/client/js/views/products/index_view.js"],"names":["Actions","fetchCurrentCartSummary","callback","dispatch","type","FETCHING_CART_SUMMARY","then","data","CART_SUMMARY_RECEIVED","cart_summary","sendCartNotification","msg","CART_NOTIFICATION_RECEIVED","notification_message","clearCartNotification","index","CART_NOTIFICATION_CLEARED","notification_index","getProductListing","FETCHING_PRODUCTS","PRODUCTS_RECEIVED","products","Application","body","document","getElementsByTagName","viewName","getAttribute","viewClass","view","window","addEventListener","handleDOMContentLoaded","bind","handleDocumentUnload","mount","unmount","CartModal","clearAlert","props","tableBody","lineItems","map","lItem","idx","path","name","quantity","total","tableStyle","width","show","onHide","cartNotifications","notifications","cartLink","Component","CartNotification","cartNotifyMessage","mapStateToProps","state","cart_notification","DismissableAlert","dismiss","message","MiniCart","ProductListing","showModal","onClick","setState","cart_link","cart","modal","cart_notifications","line_items","badgeClasses","length","mini_cart","items_in_cart","Product","product","link","thumbnail","cost_price","StackedAlerts","alerts","alert","clear","Constants","setup","csrf_token","querySelector","content","$","ajaxSetup","headers","CartNotificationListener","socket","store","options","channel","join","on","dispatchCartNotification","reducer","getElementById","initialState","id","fetching","action","slice","category_filters","params","token","userToken","connect","configureStore","createStoreWithMiddleware","checkStatus","parseJSON","httpGet","defaultHeaders","Accept","buildHeaders","csrfToken","response","status","error","Error","statusText","json","url","credentials","BaseView","render","setupListeners","cart_id","getState","BaseCheckoutView","CheckoutView","braintreeForm","braintreeClientToken","init","getView","actionName","form","initializeBrainTreeClient","bindFormSubmissionListner","clientToken","brainTreeClient","braintree","api","Client","submit","event","isBrainTreePayment","noncePresent","preventDefault","tokenizeCard","off","brainTreeForm","find","number","val","expirationDate","value","toArray","_this","err","nonce","nonce_input","attr","append","checked","filter","_","checkbox","closest","viewToRender","views","ProductView","viewLookUp","split","pop","actionLookup","AdminBaseView","BaseProductView","IndexView"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;AAAA;;;;AACA;;;;AAGA,IAAMA,UAAU;AACdC,2BAAyB,iCAACC,QAAD,EAAc;AACrC,WAAO,oBAAY;AACjBC,eAAS,EAACC,MAAM,oBAAUC,qBAAjB,EAAT;;AAEA,0BAAQ,wBAAR,EACGC,IADH,CACQ,UAACC,IAAD,EAAU;AACdJ,iBAAS;AACPC,gBAAM,oBAAUI,qBADT;AAEPC,wBAAcF;AAFP,SAAT;AAID,OANH,EAMKD,IANL,CAMU,UAASC,IAAT,EAAe;AAACL;AAAY,OANtC;AAOD,KAVD;AAWD;AAba,CAAhB;;kBAgBeF,O;;;;;;;;;;ACpBf;;;;;;AAEA,IAAMA,UAAU;AACdU,wBAAsB,8BAACC,GAAD,EAAS;AAC7B,WAAO,oBAAY;AACjBR,eAAS,EAACC,MAAM,oBAAUQ,0BAAjB;AACCC,8BAAsBF,GADvB,EAAT;AAED,KAHD;AAID,GANa;;AAQdG,yBAAuB,+BAACC,KAAD,EAAW;AAChC,WAAO,oBAAY;AACjBZ,eAAS,EAACC,MAAM,oBAAUY,yBAAjB,EAA4CC,oBAAoBF,KAAhE,EAAT;AACD,KAFD;AAGD;;AAZa,CAAhB;;kBAgBef,O;;;;;;;;;;AClBf;;;;AACA;;;;AAGA,IAAMA,UAAU;AACdkB,qBAAmB,6BAAM;AACvB,WAAO,oBAAY;AACjBf,eAAS,EAACC,MAAM,oBAAUe,iBAAjB,EAAT;;AAEA,0BAAQ,WAAR,EACGb,IADH,CACQ,UAACC,IAAD,EAAU;AACdJ,iBAAS;AACPC,gBAAM,oBAAUgB,iBADT;AAEPC,oBAAUd,KAAKc;AAFR,SAAT;AAID,OANH;AAOD,KAVD;AAWD;AAba,CAAhB;;kBAgBerB,O;;;;;;qjBCpBf;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;;;AAIA;;AAHA;;AAKA;;;;;;;;IAEMsB,W;AACJ,yBAAc;AAAA;;AACZ,QAAMC,OAAOC,SAASC,oBAAT,CAA8B,MAA9B,EAAsC,CAAtC,CAAb;AACA,QAAMC,WAAWH,KAAKI,YAAL,CAAkB,mBAAlB,CAAjB;AACA,QAAMC,YAAY,qBAAaF,QAAb,CAAlB;;AAEA,SAAKG,IAAL,GAAY,IAAID,SAAJ,EAAZ;AACAE,WAAOC,gBAAP,CAAwB,kBAAxB,EACwB,KAAKC,sBAAL,CAA4BC,IAA5B,CAAiC,IAAjC,CADxB,EAEwB,KAFxB;AAGAH,WAAOC,gBAAP,CAAwB,QAAxB,EACwB,KAAKG,oBAAL,CAA0BD,IAA1B,CAA+B,IAA/B,CADxB,EAEwB,KAFxB;AAGD;;;;6CAEwB;AACvB,WAAKJ,IAAL,CAAUM,KAAV;AACD;;;2CAEsB;AACrB,WAAKN,IAAL,CAAUO,OAAV;AACD;;;;;;AAGH,IAAId,WAAJ;;;;;;;;;;;;AC5CA;;AACA;;;;AACA;;;;AACA;;;;;;;;;;;;IAGqBe,S;;;AACnB,uBAAc;AAAA;;AAAA;;AAEZ,UAAKC,UAAL,GAAkB,MAAKA,UAAL,CAAgBL,IAAhB,OAAlB;AAFY;AAGb;;;;+BACUlB,K,EAAO;AAChB,WAAKwB,KAAL,CAAWpC,QAAX,CAAoB,4BAAwBW,qBAAxB,CAA8CC,KAA9C,CAApB;AACD;;;6BACQ;AACP,UAAMyB,YAAY,KAAKD,KAAL,CAAWE,SAAX,CAAqBC,GAArB,CAAyB,UAACC,KAAD,EAAQC,GAAR;AAAA,eAAiB;AAAA;AAAA,YAAI,KAAKA,GAAT;AACE;AAAA;AAAA;AAAI;AAAA;AAAA,gBAAG,MAAMD,MAAME,IAAf;AAAsBF,oBAAMG;AAA5B;AAAJ,WADF;AAEE;AAAA;AAAA;AAAKH,kBAAMI;AAAX,WAFF;AAGE;AAAA;AAAA;AAAKJ,kBAAMK;AAAX;AAHF,SAAjB;AAAA,OAAzB,CAAlB;;AAOA,UAAMC,aAAa,EAACC,OAAO,MAAR,EAAnB;;AAEA,aACI;AAAA;AAAA,UAAO,MAAM,KAAKX,KAAL,CAAWY,IAAxB,EAA8B,QAAQ,KAAKZ,KAAL,CAAWa,MAAjD,EAAyD,OAAM,MAA/D,EAAsE,SAAQ,WAA9E;AACE;AAAA;AAAA,YAAK,WAAU,eAAf;AACE;AAAA;AAAA;AAAA;AAAA,WADF;AAEE,oEAAe,QAAQ,KAAKb,KAAL,CAAWc,iBAAX,CAA6BC,aAApD,EAAmE,OAAO,KAAKhB,UAA/E,GAFF;AAGE;AAAA;AAAA,cAAO,WAAU,wBAAjB,EAA0C,OAAOW,UAAjD;AACE;AAAA;AAAA;AACE;AAAA;AAAA;AAAI;AAAA;AAAA;AAAA;AAAA,iBAAJ;AAAoB;AAAA;AAAA;AAAA;AAAA,iBAApB;AAAqC;AAAA;AAAA;AAAA;AAAA;AAArC;AADF,aADF;AAIE;AAAA;AAAA;AACGT;AADH;AAJF,WAHF;AAWE;AAAA;AAAA,cAAG,MAAM,KAAKD,KAAL,CAAWgB,QAApB;AAAA;AAAA;AAXF;AADF,OADJ;AAiBD;;;;EAnCoC,gBAAMC,S;;kBAAxBnB,S;;;;;;;;;;;;ACNrB;;;;AACA;;;;;;;;;;IAEMoB,gB;;;;;;;;;;;6BACK;AACP,UAAMC,oBAAoB,KAAKnB,KAAL,CAAW1B,oBAArC;AACA,UAAI6C,qBAAqBA,qBAAqB,EAA9C,EAAkD;AAChD,eAAQ;AAAA;AAAA,YAAK,WAAU,gCAAf;AAAiDA;AAAjD,SAAR;AACD,OAFD,MAEO;AACL;AACA,eAAQ,uCAAK,WAAU,4BAAf,GAAR;AACD;AACF;;;;EAT4B,gBAAMF,S;;AAYrC,IAAMG,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD;AAAA,SAAYA,MAAMC,iBAAlB;AAAA,CAAxB;;kBAEe,yBAAQF,eAAR,EAAyBF,gBAAzB,C;;;;;;;;;;;;ACjBf;;;;;;;;;;;;IAEqBK,gB;;;;;;;;;;;6BAEV;AACP,aAAQ;AAAA;AAAA,UAAK,WAAU,oBAAf;AACA;AAAA;AAAA,YAAG,MAAK,GAAR,EAAY,SAAM,OAAlB,EAA0B,OAAM,OAAhC,EAAwC,SAAS,KAAKvB,KAAL,CAAWwB,OAA5D;AAAA;AAAA,SADA;AAEE;AAAA;AAAA;AAAO,eAAKxB,KAAL,CAAWyB;AAAlB;AAFF,OAAR;AAID;;;;EAP2C,gBAAMR,S;;kBAA/BM,gB;;;;;;;;;;;ACFrB;;;;AACA;;;;AACA;;;;;;QAEQL,gB;QAAkBQ,Q;QAAUC,c;;;;;;;;;;;;ACJpC;;;;AACA;;AACA;;;;;;;;;;;;IAEMD,Q;;;AACJ,sBAAc;AAAA;;AAAA;;AAEZ,UAAKL,KAAL,GAAa,EAACO,WAAW,KAAZ,EAAb;AACA,UAAKC,OAAL,GAAe,MAAKA,OAAL,CAAanC,IAAb,OAAf;AACA,UAAKmB,MAAL,GAAc,MAAKA,MAAL,CAAYnB,IAAZ,OAAd;AAJY;AAKb;;;;8BAES;AACR,WAAKoC,QAAL,CAAc,EAACF,WAAW,IAAZ,EAAd;AACD;;;6BAEQ;AACP,WAAKE,QAAL,CAAc,EAACF,WAAW,KAAZ,EAAd;AACD;;;6BAEQ;AACP,UAAIG,YAAY,KAAK,KAAK/B,KAAL,CAAWgC,IAAX,CAAgBD,SAArC;AACA,UAAME,QAAQ,sDAAW,QAAQ,KAAKpB,MAAxB;AACW,2BAAmB,KAAKb,KAAL,CAAWkC,kBADzC;AAEW,mBAAW,KAAKlC,KAAL,CAAWgC,IAAX,CAAgB9D,YAAhB,CAA6BiE,UAFnD;AAGW,kBAAU,KAAKnC,KAAL,CAAWgC,IAAX,CAAgBD,SAHrC;AAIW,cAAM,KAAKV,KAAL,CAAWO,SAJ5B;AAKW,kBAAU,KAAK5B,KAAL,CAAWpC,QALhC,GAAd;AAMA,UAAIwE,eAAe,aAAnB;AACA,UAAI,KAAKpC,KAAL,CAAWkC,kBAAX,CAA8BnB,aAA9B,CAA4CsB,MAA5C,GAAqD,CAAzD,EAA4D;AAC1DD,uBAAe,kBAAf;AACD;AACD,UAAIE,YACA;AAAA;AAAA;AACA;AAAA;AAAA,YAAG,MAAK,QAAR,EAAkB,WAAWF,eAAe,yBAA5C,EAAuE,SAAS,KAAKP,OAArF;AAAA;AACO;AAAA;AAAA,cAAM,WAAU,OAAhB;AAAyB,iBAAK7B,KAAL,CAAWgC,IAAX,CAAgB9D,YAAhB,CAA6BqE;AAAtD;AADP,SADA;AAICN;AAJD,OADJ;AAQA,aAAOK,SAAP;AACD;;;;EArCoB,gBAAMrB,S;;AAwC7B,IAAMG,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD;AAAA,SAAaA,MAAMiB,SAAnB;AAAA,CAAxB;;kBAEe,yBAAQlB,eAAR,EAAyBM,QAAzB,C;;;;;;;;;;;;AC9Cf;;;;;;;;;;;;IAGMc,O;;;;;;;;;;;6BACK;AACP,aACE;AAAA;AAAA,UAAK,WAAU,sBAAf;AACE;AAAA;AAAA,YAAK,WAAU,qBAAf;AACE;AAAA;AAAA,cAAK,WAAU,YAAf;AAA6B,iBAAKxC,KAAL,CAAWyC,OAAX,CAAmBlC;AAAhD,WADF;AAEE;AAAA;AAAA,cAAK,WAAU,YAAf;AACE;AAAA;AAAA,gBAAG,MAAM,KAAKP,KAAL,CAAWyC,OAAX,CAAmBC,IAA5B;AACE,qDAAK,KAAK,KAAK1C,KAAL,CAAWyC,OAAX,CAAmBE,SAA7B,EAAwC,OAAO,KAAK3C,KAAL,CAAWyC,OAAX,CAAmBlC,IAAlE;AADF;AADF,WAFF;AAOE;AAAA;AAAA,cAAK,WAAU,cAAf;AACE;AAAA;AAAA;AAAO,mBAAKP,KAAL,CAAWyC,OAAX,CAAmBG;AAA1B;AADF;AAPF;AADF,OADF;AAeD;;;;EAjBmB,gBAAM3B,S;;kBAoBbuB,O;;;;;;;;;;;;ACvBf;;;;AACA;;;;AACA;;;;;;;;;;IAEMb,c;;;;;;;;;;;6BACK;AACP,UAAM7C,WAAW,KAAKkB,KAAL,CAAWlB,QAAX,CAAoBqB,GAApB,CACf,UAACsC,OAAD,EAAUpC,GAAV;AAAA,eAAmB,mDAAS,SAASoC,OAAlB,EAA2B,KAAKpC,GAAhC,GAAnB;AAAA,OADe,CAAjB;;AAIA,aACE;AAAA;AAAA,UAAK,WAAU,KAAf;AACE;AAAA;AAAA,YAAK,WAAU,WAAf;AACGvB;AADH;AADF,OADF;AAOD;;;;EAb0B,gBAAMmC,S;;AAgBnC,IAAMG,kBAAkB,SAAlBA,eAAkB,CAACC,KAAD;AAAA,SAAaA,MAAMvC,QAAnB;AAAA,CAAxB;;kBAEe,yBAAQsC,eAAR,EAAyBO,cAAzB,C;;;;;;;;;;;;ACtBf;;;;AACA;;;;;;;;;;;;IAEqBkB,a;;;;;;;;;;;6BACV;AAAA;;AACP,UAAMC,SAAS,KAAK9C,KAAL,CAAW8C,MAAX,CAAkB3C,GAAlB,CAAuB,UAAC4C,KAAD,EAAQ1C,GAAR;AAAA,eAAgB;AACG,mBAAS0C,MAAMtB,OADlB;AAEG,eAAKpB,GAFR;AAGG,iBAAOA,GAHV;AAIG,mBAAS,OAAKL,KAAL,CAAWgD,KAAX,CAAiBtD,IAAjB,SAA4BW,GAA5B,CAJZ,GAAhB;AAAA,OAAvB,CAAf;AAKA,aACE;AAAA;AAAA;AACGyC;AADH,OADF;AAKD;;;;EAZwC,gBAAM7B,S;;kBAA5B4B,a;;;;;;;;;ACHrB,IAAMI,YAAY;AAChBnF,yBAAuB,uBADP;AAEhBG,yBAAuB,uBAFP;AAGhBW,qBAAmB,mBAHH;AAIhBC,qBAAmB,mBAJH;AAKhBR,8BAA4B,4BALZ;AAMhBI,6BAA2B;AANX,CAAlB;kBAQewE,S;;;;;;;;;kBCRA;AACbC,OADa,mBACL;AACN,QAAIC,aAAalE,SAASmE,aAAT,CAAuB,iBAAvB,EAA0CC,OAA3D;AACAC,MAAEC,SAAF,CAAY;AACVC,eAAS;AACP,wBAAgBL;AADT;AADC,KAAZ;AAKD;AARY,C;;;;;;;;;;;;ACAf;;;;;;;;IAGqBM,wB;AACnB,oCAAYC,MAAZ,EAAoBC,KAApB,EAA2BC,OAA3B,EAAoC;AAAA;;AAClC,SAAKD,KAAL,GAAeA,KAAf;AACA,SAAKD,MAAL,GAAeA,MAAf;AACA,SAAKG,OAAL,GAAeH,OAAOG,OAAP,CAAe,UAAQD,QAAQ,SAAR,CAAvB,EAA2C,EAA3C,CAAf;AACA,SAAKC,OAAL,CAAaC,IAAb;AACA,SAAKD,OAAL,CAAaE,EAAb,CAAgB,kBAAhB,EAAoC,KAAKC,wBAAL,CAA8BtE,IAA9B,CAAmC,IAAnC,CAApC;AACD;;;;mDAE+B;AAAA,UAANtB,GAAM,QAANA,GAAM;;AAC9B,WAAKuF,KAAL,CAAW/F,QAAX,CAAoB,4BAAwBO,oBAAxB,CAA6CC,GAA7C,CAApB;AACD;;;;;;kBAXkBqF,wB;;;;;;;;;;;;kBCOGQ,O;;AAVxB;;;;;;AAEA,IAAMjC,OAAO/C,SAASiF,cAAT,CAAwB,MAAxB,CAAb;AACA,IAAMnC,YAAYC,OAAOA,KAAK5C,YAAL,CAAkB,gBAAlB,CAAP,GAA6C,EAA/D;AACA,IAAM+E,eAAe;AACnBjG,gBAAc,EAACqE,eAAe,CAAhB,EAAmB6B,IAAI,CAAC,CAAxB,EAA2BjC,YAAY,EAAvC,EADK;AAEnBkC,YAAU,IAFS;AAGnBtC;AAHmB,CAArB;;AAMe,SAASkC,OAAT,GAAoD;AAAA,MAAnC5C,KAAmC,uEAA3B8C,YAA2B;AAAA,MAAbG,MAAa,uEAAJ,EAAI;;AACjE,UAAOA,OAAOzG,IAAd;AACA,SAAK,oBAAUC,qBAAf;AACE,0BAAWuD,KAAX,IAAkBgD,UAAU,IAA5B;AACF,SAAK,oBAAUpG,qBAAf;AACE,0BAAWoD,KAAX,IAAkBnD,cAAcoG,OAAOpG,YAAvC,EAAqDmG,UAAU,KAA/D;AACF;AACE,aAAOhD,KAAP;AANF;AAQD;;;;;;;;;;;;kBCbuB4C,O;;AANxB;;;;;;;;AAEA,IAAME,eAAe;AACnBpD,iBAAe;AADI,CAArB;;AAIe,SAASkD,OAAT,GAAoD;AAAA,MAAnC5C,KAAmC,uEAA3B8C,YAA2B;AAAA,MAAbG,MAAa,uEAAJ,EAAI;;AACjE,UAAOA,OAAOzG,IAAd;AACA,SAAK,oBAAUQ,0BAAf;AACE,0BAAWgD,KAAX,IAAkBN,4CAAmBM,MAAMN,aAAzB,IAAwC,EAACU,SAAS6C,OAAOhG,oBAAjB,EAAxC,EAAlB;AACF,SAAK,oBAAUG,yBAAf;AACE,0BAAW4C,KAAX,IAAkBN,4CAAmBM,MAAMN,aAAN,CAAoBwD,KAApB,CAA0B,CAA1B,EAA6BD,OAAO5F,kBAApC,CAAnB,sBAA+E2C,MAAMN,aAAN,CAAoBwD,KAApB,CAA0BD,OAAO5F,kBAAP,GAA0B,CAApD,CAA/E,EAAlB;AACF;AACE,aAAO2C,KAAP;AANF;AAQD;;;;;;;;;;ACfD;;AACA;;;;AACA;;;;;;AAEA,IAAMiB,YAAY,4BAAgB,EAACN,oBAAD,EAAOE,+CAAP,EAAhB,CAAlB;kBACe,4BAAgB;AAC7BI;AAD6B,CAAhB,C;;;;;;;;;;;;kBCIS2B,O;;AATxB;;;;;;AAEA;AACA,IAAME,eAAe;AACnBrF,YAAU,EADS;AAEnBuF,YAAU,IAFS;AAGnBG,oBAAkB;AAHC,CAArB;;AAMe,SAASP,OAAT,GAAkD;AAAA,MAAjC5C,KAAiC,uEAAzB8C,YAAyB;AAAA,MAAXG,MAAW,uEAAJ,EAAI;;AAC/D,UAAOA,OAAOzG,IAAd;AACA,SAAK,oBAAUe,iBAAf;AACE,0BAAWyC,KAAX,IAAkBgD,UAAU,IAA5B;AACF,SAAK,oBAAUxF,iBAAf;AACE,0BAAWwC,KAAX,IAAkBgD,UAAU,KAA5B,EAAmCvF,UAAUwF,OAAOxF,QAApD;AACF;AACE,aAAOuC,KAAP;AANF;AAQD;;;;;;;;;;ACbD;;AAEA,IAAIqC,SAAS,oBAAW,SAAX,EAAsB,EAACe,QAAQ,EAACC,OAAOnF,OAAOoF,SAAf,EAAT,EAAtB,CAAb;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;;AAnDA;AACA;;AAEA;AACA;AAiDAjB,OAAOkB,OAAP;;AAEA;AACA;AACA;AACA;AACA;;kBAEelB,M;;;;;;;;;kBCzDSmB,c;;AAJxB;;AACA;;;;AACA;;;;;;AAEe,SAASA,cAAT,GAA0B;AACvC,MAAMC,4BAA4B,qEAAlC;AACA,SAAOA,6CAAP;AACD;;;;;;;;;;;;QCQeC,W,GAAAA,W;QAUAC,S,GAAAA,S;QAIAC,O,GAAAA,O;;AA7BhB;;;;AACA;;;;AAGA,IAAMC,iBAAiB;AACrBC,UAAQ,kBADa;AAErB,kBAAgB;AAFK,CAAvB;;AAKA,SAASC,YAAT,GAAwB;AACtB;AACA,MAAMC,YAAY,mBAAlB;AACA,sBAAWH,cAAX,IAA2B,gBAAgBG,SAA3C;AACD;;AAEM,SAASN,WAAT,CAAqBO,QAArB,EAA+B;AACpC,MAAIA,SAASC,MAAT,IAAmB,GAAnB,IAA0BD,SAASC,MAAT,GAAkB,GAAhD,EAAqD;AACnD,WAAOD,QAAP;AACD,GAFD,MAEO;AACL,QAAIE,QAAQ,IAAIC,KAAJ,CAAUH,SAASI,UAAnB,CAAZ;AACAF,UAAMF,QAAN,GAAiBA,QAAjB;AACA,UAAME,KAAN;AACD;AACF;;AAEM,SAASR,SAAT,CAAmBM,QAAnB,EAA6B;AAClC,SAAOA,SAASK,IAAT,EAAP;AACD;;AAEM,SAASV,OAAT,CAAiBW,GAAjB,EAAsB;AAC3B,SAAO,+BAAMA,GAAN,EAAW,EAACpC,SAAS4B,cAAV,EAA0BS,aAAa,aAAvC,EAAX,EACC9H,IADD,CACMgH,WADN,EACmBhH,IADnB,CACwBiH,SADxB,CAAP;AAED;;;;;;;;;;;;AChCD;;;;AACA;;;;AACA;;AACA;;;;AACA;;AACA;;;;AACA;;;;AACA;;;;;;;;IAGqBc,Q;;;;;;;4BACX;AACN,WAAKnC,KAAL,GAAa,sBAAb;AACA,yBAASoC,MAAT,CAAgB;AAAA;AAAA,UAAU,OAAO,KAAKpC,KAAtB;AACI;AADJ,OAAhB,EAGgB1E,SAASiF,cAAT,CAAwB,MAAxB,CAHhB;;AAKA,WAAKP,KAAL,CAAW/F,QAAX,CAAoB,eAAYF,uBAAZ,CAAoC,KAAKsI,cAAL,CAAoBtG,IAApB,CAAyB,IAAzB,CAApC,CAApB;AACD;;;8BAES,CACT;;;qCAEgB;AACf,WAAKgE,MAAL;AACA,uBAAOkB,OAAP;AACA,iEAAqC,KAAKjB,KAA1C,EAAiD,EAACsC,SAAS,KAAKtC,KAAL,CAAWuC,QAAX,GAAsB5D,SAAtB,CAAgCN,IAAhC,CAAqC9D,YAArC,CAAkDkG,EAA5D,EAAjD;AACD;;;;;;kBAlBkB0B,Q;;;;;;;;;;;;;;ACVrB;;;;;;;;;;;;IAGqBK,gB;;;;;;;;;;;4BACX;AACN;AACD;;;8BAES;AACR;AACD;;;;;;kBAPkBA,gB;;;;;;;;;;;;;;ACHrB;;;;AACA;;;;;;;;;;;;IAEqBC,Y;;;;;;;;;;;4BACX;AACN;AACA,UAAM/E,QAAQpC,SAASiF,cAAT,CAAwB,OAAxB,EAAiC9E,YAAjC,CAA8C,kBAA9C,CAAd;AACA,UAAI,KAAKiC,KAAL,CAAJ,EAAiB;AAAE,aAAKA,KAAL;AAAgB;AACpC;;;0BAEK;AACJ,UAAIgF,gBAAgBpH,SAASiF,cAAT,CAAwB,WAAxB,CAApB;AACA,UAAImC,aAAJ,EAAmB;AACjB,YAAMC,uBAAuBD,cAAcjH,YAAd,CAA2B,mBAA3B,CAA7B;AACA,0BAAQmH,IAAR,CAAa,EAACD,0CAAD,EAAb;AACD;AACF;;;;;;kBAbkBF,Y;;;;;;;;;kBCAGI,O;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,OAAT,CAAiBC,UAAjB,EAA6B;AAC1C,UAAOA,UAAP;AACA,SAAK,UAAL;AACE;AACF;AACE;AAJF;AAMD;;;;;;;;;kBCVc;AACbC,QAAMpD,EAAE,sBAAF,CADO;;AAGbiD,QAAM,oBAEH;AAAA,QADDD,oBACC,QADDA,oBACC;;AACD,SAAKK,yBAAL,CAA+BL,oBAA/B;AACA,SAAKM,yBAAL;AACD,GARY;;AAUbD,6BAA2B,mCAASE,WAAT,EAAsB;AAC/C,SAAKC,eAAL,GAAuB,IAAIC,UAAUC,GAAV,CAAcC,MAAlB,CAAyB;AAC9CJ;AAD8C,KAAzB,CAAvB;AAGD,GAdY;;AAgBbD,6BAA2B,qCAAW;AAAA;;AACpC,SAAKF,IAAL,CAAUQ,MAAV,CAAiB,UAACC,KAAD,EAAW;AAC1B,UAAI,OAAKC,kBAAL,MAA6B,CAAC,OAAKC,YAAL,EAAlC,EAAuD;AACrDF,cAAMG,cAAN;AACA,eAAKC,YAAL;AACD,OAHD,MAGO;AACL,eAAKb,IAAL,CAAUc,GAAV,CAAc,QAAd,EAAwBN,MAAxB;AACD;AACF,KAPD;AAQD,GAzBY;;AA2BbK,gBAAc,wBAAW;AACvB,QAAIE,gBAAgB,KAAKf,IAAL,CAAUgB,IAAV,CAAe,mCAAf,CAApB;AACA,QAAIC,SAASF,cAAcC,IAAd,CAAmB,6DAAnB,EAAkFE,GAAlF,EAAb;AACA,QAAIC,iBAAiBJ,cAAcC,IAAd,CAAmB,QAAnB,EAA6BvH,GAA7B,CAAiC,UAACE,GAAD,EAAMuH,GAAN;AAAA,aAAcA,IAAIE,KAAlB;AAAA,KAAjC,EAA0DC,OAA1D,GAAoEjE,IAApE,CAAyE,GAAzE,CAArB;AACA,QAAIkE,QAAQ,IAAZ;AACA,SAAKlB,eAAL,CAAqBS,YAArB,CAAkC;AAC9BI,oBAD8B,EACtBE;AADsB,KAAlC,EAGE,UAASI,GAAT,EAAcC,KAAd,EAAqB;AACnB,UAAID,GAAJ,EAAS;AACPlF,cAAMkF,GAAN;AACA;AACD;;AAED,UAAIE,cAAc7E,EAAE,SAAF,EAAa8E,IAAb,CAAkB,MAAlB,EAA0B,QAA1B,EAAoCA,IAApC,CAAyC,MAAzC,EAAiD,yCAAjD,EAA4FR,GAA5F,CAAgGM,KAAhG,CAAlB;AACAF,YAAMtB,IAAN,CAAW2B,MAAX,CAAkB/E,EAAE6E,WAAF,CAAlB;AACAH,YAAMtB,IAAN,CAAWc,GAAX,CAAe,QAAf,EAAyBN,MAAzB;AACD,KAZH;AAaD,GA7CY;;AA+CbE,sBAAoB,8BAAW;AAC7B,QAAIkB,UAAUhF,EAAE,KAAKoD,IAAL,CAAUgB,IAAV,CAAe,sBAAf,EAAuCa,MAAvC,CAA8C,UAACC,CAAD,EAAIC,QAAJ;AAAA,aAAiBA,SAASH,OAA1B;AAAA,KAA9C,CAAF,CAAd;AACA,WAAOA,QAAQI,OAAR,CAAgB,eAAhB,EAAiC1K,IAAjC,CAAsC,KAAtC,KAAgD,WAAvD;AACD,GAlDY;;AAoDbqJ,gBAAc,wBAAW;AACvB,WAAO,CAAC,CAAC,KAAKX,IAAL,CAAUgB,IAAV,CAAe,4CAAf,EAA6DE,GAA7D,EAAT;AACD;AAtDY,C;;;;;;;;;kBCUSe,Y;;AAVxB;;;;AACA;;;;AACA;;;;;;AAEA;AACA,IAAMC,QAAQ;AACZC,iCADY;AAEZzC;AAFY,CAAd;;AAKe,SAASuC,YAAT,CAAsBrJ,IAAtB,EAA4B;AACzC,MAAIwJ,aAAexJ,KAAKyJ,KAAL,CAAW,GAAX,CAAnB;AACA,MAAMtC,aAAaqC,WAAWE,GAAX,EAAnB;AACA,MAAM7J,WAAa2J,WAAWhF,IAAX,CAAgB,EAAhB,CAAnB;AACA,MAAImF,eAAeL,MAAMzJ,QAAN,CAAnB;;AAEA,MAAI8J,YAAJ,EAAkB;AAChB,WAAOA,aAAaxC,UAAb,CAAP;AACD,GAFD,MAEO;AACL,QAAIqC,WAAW,CAAX,KAAiB,OAArB,EAA8B;AAC5B,aAAOI,aAAP;AACD,KAFD,MAEO;AACL;AACD;AACF;AACF;;;;;;;;;;;;;;ACzBD;;;;;;;;;;;;IAGqBC,e;;;;;;;;;;;4BACX;AACN;AACD;;;8BAES;AACR;AACD;;;;;;kBAPkBA,e;;;;;;;;;kBCAG3C,O;;AAHxB;;;;AACA;;;;;;AAEe,SAASA,OAAT,CAAiBC,UAAjB,EAA6B;AAC1C,UAAOA,UAAP;AACA,SAAK,OAAL;AACE;AACF;AACE;AAJF;AAMD;;;;;;;;;;;;;;ACVD;;;;;;;;;;;;IAGqB2C,S;;;;;;;;;;;4BACX;AACN;AACD;;;8BAES;AACR;AACD;;;;;;kBAPkBA,S","file":"priv/static/js/app.js","sourcesContent":["import Constants from '../constants';\nimport {httpGet} from '../utils';\n\n\nconst Actions = {\n  fetchCurrentCartSummary: (callback) => {\n    return dispatch => {\n      dispatch({type: Constants.FETCHING_CART_SUMMARY});\n\n      httpGet('/api/cart?summary=true')\n        .then((data) => {\n          dispatch({\n            type: Constants.CART_SUMMARY_RECEIVED,\n            cart_summary: data\n          });\n        }).then(function(data) {callback();});\n    };\n  }\n};\n\nexport default Actions;\n","import Constants from \"../constants\";\n\nconst Actions = {\n  sendCartNotification: (msg) => {\n    return dispatch => {\n      dispatch({type: Constants.CART_NOTIFICATION_RECEIVED,\n                notification_message: msg});\n    };\n  },\n\n  clearCartNotification: (index) => {\n    return dispatch => {\n      dispatch({type: Constants.CART_NOTIFICATION_CLEARED, notification_index: index});\n    };\n  }\n\n};\n\nexport default Actions;\n","import Constants from '../constants';\nimport {httpGet} from '../utils';\n\n\nconst Actions = {\n  getProductListing: () => {\n    return dispatch => {\n      dispatch({type: Constants.FETCHING_PRODUCTS});\n\n      httpGet('/products')\n        .then((data) => {\n          dispatch({\n            type: Constants.PRODUCTS_RECEIVED,\n            products: data.products\n          });\n        });\n    };\n  }\n};\n\nexport default Actions;\n","// Brunch automatically concatenates all files in your\n// watched paths. Those paths can be configured at\n// config.paths.watched in \"brunch-config.js\".\n//\n// However, those files will only be executed if\n// explicitly imported. The only exception are files\n// in vendor, which are never wrapped in imports and\n// therefore are always executed.\n\n// Import dependencies\n//\n// If you no longer want to use a dependency, remember\n// to also remove its path from \"config.paths.watched\".\nimport \"phoenix_html\";\n\n\n// based on: https://blog.diacode.com/page-specific-javascript-in-phoenix-framework-pt-1\n\nimport viewToRender from \"./views\";\n\nclass Application {\n  constructor() {\n    const body = document.getElementsByTagName('body')[0];\n    const viewName = body.getAttribute('data-js-view-name');\n    const viewClass = viewToRender(viewName);\n\n    this.view = new viewClass();\n    window.addEventListener('DOMContentLoaded',\n                            this.handleDOMContentLoaded.bind(this),\n                            false);\n    window.addEventListener('unload',\n                            this.handleDocumentUnload.bind(this),\n                            false);\n  }\n\n  handleDOMContentLoaded() {\n    this.view.mount();\n  }\n\n  handleDocumentUnload() {\n    this.view.unmount();\n  }\n}\n\nnew Application();\n","import { Modal } from \"react-bootstrap\";\nimport React from \"react\";\nimport StackedAlerts from \"./stacked_alerts\";\nimport cartNotificationActions from \"../actions/cart_notification\";\n\n\nexport default class CartModal extends React.Component {\n  constructor() {\n    super();\n    this.clearAlert = this.clearAlert.bind(this);\n  }\n  clearAlert(index) {\n    this.props.dispatch(cartNotificationActions.clearCartNotification(index));\n  }\n  render() {\n    const tableBody = this.props.lineItems.map((lItem, idx) =>  <tr key={idx}>\n                                                                  <td><a href={lItem.path}>{lItem.name}</a></td>\n                                                                  <td>{lItem.quantity}</td>\n                                                                  <td>{lItem.total}</td>\n                                                                </tr>\n                                                               );\n\n    const tableStyle = {width: \"100%\"};\n\n    return(\n        <Modal show={this.props.show} onHide={this.props.onHide} title=\"cart\" bsStyle=\"container\">\n          <div className=\"cart-contents\">\n            <h5>Your cart contents</h5>\n            <StackedAlerts alerts={this.props.cartNotifications.notifications} clear={this.clearAlert}/>\n            <table className=\"table table-responsive\" style={tableStyle}>\n              <thead>\n                <tr><th>Product</th><th>Quantity</th><th>Cost</th></tr>\n              </thead>\n              <tbody>\n                {tableBody}\n              </tbody>\n            </table>\n            <a href={this.props.cartLink}>Go To My Cart</a>\n          </div>\n        </Modal>\n    );\n  }\n}\n","import React from \"react\";\nimport { connect } from \"react-redux\";\n\nclass CartNotification extends React.Component {\n  render() {\n    const cartNotifyMessage = this.props.notification_message;\n    if (cartNotifyMessage && cartNotifyMessage != \"\") {\n      return (<div className=\"cart_notification active alert\">{cartNotifyMessage}</div>);\n    } else {\n      // return inactive cart notification if no message present\n      return (<div className=\"cart_notification inactive\"></div>);\n    }\n  }\n}\n\nconst mapStateToProps = (state) => (state.cart_notification);\n\nexport default connect(mapStateToProps)(CartNotification);\n","import React from \"react\";\n\nexport default class DismissableAlert extends React.Component {\n\n  render() {\n    return (<div className=\"alert alert-danger\">\n            <a href=\"#\" class=\"close\" title=\"close\" onClick={this.props.dismiss}>×</a>\n              <span>{this.props.message}</span>\n            </div>);\n  }\n}\n","import CartNotification from \"./cart_notification\";\nimport MiniCart from \"./mini_cart\";\nimport ProductListing from \"./product_listing\";\n\nexport {CartNotification, MiniCart, ProductListing};\n","import React from \"react\";\nimport { connect } from 'react-redux';\nimport CartModal from \"./cart_modal\";\n\nclass MiniCart extends React.Component {\n  constructor() {\n    super();\n    this.state = {showModal: false};\n    this.onClick = this.onClick.bind(this);\n    this.onHide = this.onHide.bind(this);\n  }\n\n  onClick() {\n    this.setState({showModal: true});\n  }\n\n  onHide() {\n    this.setState({showModal: false});\n  }\n\n  render() {\n    var cart_link = \"\" + this.props.cart.cart_link;\n    const modal = <CartModal onHide={this.onHide}\n                             cartNotifications={this.props.cart_notifications}\n                             lineItems={this.props.cart.cart_summary.line_items}\n                             cartLink={this.props.cart.cart_link}\n                             show={this.state.showModal}\n                             dispatch={this.props.dispatch}/>;\n    let badgeClasses = \"btn-primary\";\n    if (this.props.cart_notifications.notifications.length > 0) {\n      badgeClasses = \"shake btn-danger\";\n    }\n    let mini_cart = (\n        <div>\n        <a type=\"button\"  className={badgeClasses + \" btn btn-default btn-sm\"} onClick={this.onClick}>\n          Cart <span className=\"badge\">{this.props.cart.cart_summary.items_in_cart}</span>\n        </a>\n        {modal}\n        </div>\n    );\n    return mini_cart;\n  }\n}\n\nconst mapStateToProps = (state) => ( state.mini_cart );\n\nexport default connect(mapStateToProps)(MiniCart);\n","import React from \"react\";\n\n\nclass Product extends React.Component {\n  render() {\n    return (\n      <div className=\"panel-group col-lg-3\">\n        <div className=\"panel panel-default\">\n          <div className=\"panel-body\">{this.props.product.name}</div>\n          <div className=\"panel-body\">\n            <a href={this.props.product.link}>\n              <img src={this.props.product.thumbnail} title={this.props.product.name}></img>\n            </a>\n          </div>\n          <div className=\"panel-footer\">\n            <span>{this.props.product.cost_price}</span>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default Product;\n","import React from \"react\";\nimport Product from \"./product\";\nimport {connect} from 'react-redux';\n\nclass ProductListing extends React.Component {\n  render() {\n    const products = this.props.products.map(\n      (product, idx) => (<Product product={product} key={idx}/>)\n    );\n\n    return(\n      <div className=\"row\">\n        <div className=\"col-md-12\">\n          {products}\n        </div>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = (state) => ( state.products );\n\nexport default connect(mapStateToProps)(ProductListing);\n","import React from \"react\";\nimport DismissableAlert from \"./dismissable_alert\";\n\nexport default class StackedAlerts extends React.Component {\n  render() {\n    const alerts = this.props.alerts.map( (alert, idx) => <DismissableAlert\n                                                             message={alert.message}\n                                                             key={idx}\n                                                             index={idx}\n                                                             dismiss={this.props.clear.bind(this, idx)}/>);\n    return (\n      <div>\n        {alerts}\n      </div>\n    );\n  }\n}\n","const Constants = {\n  FETCHING_CART_SUMMARY: 'FETCHING_CART_SUMMARY',\n  CART_SUMMARY_RECEIVED: 'CART_SUMMARY_RECEIVED',\n  FETCHING_PRODUCTS: 'FETCHING_PRODUCTS',\n  PRODUCTS_RECEIVED: 'PRODUCTS_RECEIVED',\n  CART_NOTIFICATION_RECEIVED: 'CART_NOTIFICATION_RECEIVED',\n  CART_NOTIFICATION_CLEARED: 'CART_NOTIFICATION_CLEARED'\n};\nexport default Constants;\n","export default {\n  setup() {\n    let csrf_token = document.querySelector('meta[name=csrf]').content;\n    $.ajaxSetup({\n      headers: {\n        \"X-CSRF-TOKEN\": csrf_token\n      }\n    });\n  }\n};\n","import cartNotificationActions from \"../actions/cart_notification\";\n\n\nexport default class CartNotificationListener {\n  constructor(socket, store, options) {\n    this.store   = store;\n    this.socket  = socket;\n    this.channel = socket.channel(\"cart:\"+options[\"cart_id\"], {});\n    this.channel.join();\n    this.channel.on(\"new_notification\", this.dispatchCartNotification.bind(this));\n  }\n\n  dispatchCartNotification({msg}) {\n    this.store.dispatch(cartNotificationActions.sendCartNotification(msg));\n  }\n}\n","import Constants from '../constants';\n\nconst cart = document.getElementById('cart');\nconst cart_link = cart ? cart.getAttribute('data-cart-link') : \"\";\nconst initialState = {\n  cart_summary: {items_in_cart: 0, id: -1, line_items: []},\n  fetching: true,\n  cart_link\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch(action.type) {\n  case Constants.FETCHING_CART_SUMMARY:\n    return {...state, fetching: true};\n  case Constants.CART_SUMMARY_RECEIVED:\n    return {...state, cart_summary: action.cart_summary, fetching: false};\n  default:\n    return state;\n  }\n}\n","import Constants from \"../constants\";\n\nconst initialState = {\n  notifications: []\n};\n\nexport default function reducer(state = initialState, action = {}) {\n  switch(action.type) {\n  case Constants.CART_NOTIFICATION_RECEIVED:\n    return {...state, notifications: [...state.notifications, {message: action.notification_message}]};\n  case Constants.CART_NOTIFICATION_CLEARED:\n    return {...state, notifications: [...state.notifications.slice(0, action.notification_index), ...state.notifications.slice(action.notification_index+1)]};\n  default:\n    return state;\n  }\n}\n","import {combineReducers } from 'redux';\nimport cart from './cart';\nimport cart_notifications from './cart_notification';\n\nconst mini_cart = combineReducers({cart, cart_notifications});\nexport default combineReducers({\n  mini_cart\n});\n","import Constants from '../constants';\n\n// future enhancement, add pagination\nconst initialState = {\n  products: [],\n  fetching: true,\n  category_filters: []\n};\n\nexport default function reducer(state = initialState, action={}) {\n  switch(action.type) {\n  case Constants.FETCHING_PRODUCTS:\n    return {...state, fetching: true};\n  case Constants.PRODUCTS_RECEIVED:\n    return {...state, fetching: false, products: action.products };\n  default:\n    return state;\n  }\n}\n","// NOTE: The contents of this file will only be executed if\n// you uncomment its entry in \"web/static/js/app.js\".\n\n// To use Phoenix channels, the first step is to import Socket\n// and connect at the socket path in \"lib/my_app/endpoint.ex\":\nimport {Socket} from \"phoenix\"\n\nlet socket = new Socket(\"/socket\", {params: {token: window.userToken}})\n\n// When you connect, you'll often need to authenticate the client.\n// For example, imagine you have an authentication plug, `MyAuth`,\n// which authenticates the session and assigns a `:current_user`.\n// If the current user exists you can assign the user's token in\n// the connection for use in the layout.\n//\n// In your \"web/router.ex\":\n//\n//     pipeline :browser do\n//       ...\n//       plug MyAuth\n//       plug :put_user_token\n//     end\n//\n//     defp put_user_token(conn, _) do\n//       if current_user = conn.assigns[:current_user] do\n//         token = Phoenix.Token.sign(conn, \"user socket\", current_user.id)\n//         assign(conn, :user_token, token)\n//       else\n//         conn\n//       end\n//     end\n//\n// Now you need to pass this token to JavaScript. You can do so\n// inside a script tag in \"web/templates/layout/app.html.eex\":\n//\n//     <script>window.userToken = \"<%= assigns[:user_token] %>\";</script>\n//\n// You will need to verify the user token in the \"connect/2\" function\n// in \"web/channels/user_socket.ex\":\n//\n//     def connect(%{\"token\" => token}, socket) do\n//       # max_age: 1209600 is equivalent to two weeks in seconds\n//       case Phoenix.Token.verify(socket, \"user socket\", token, max_age: 1209600) do\n//         {:ok, user_id} ->\n//           {:ok, assign(socket, :user, user_id)}\n//         {:error, reason} ->\n//           :error\n//       end\n//     end\n//\n// Finally, pass the token on connect as below. Or remove it\n// from connect if you don't care about authentication.\n\nsocket.connect()\n\n// Now that you are connected, you can join channels with a topic:\n// let channel = socket.channel(\"topic:subtopic\", {})\n// channel.join()\n//   .receive(\"ok\", resp => { console.log(\"Joined successfully\", resp) })\n//   .receive(\"error\", resp => { console.log(\"Unable to join\", resp) })\n\nexport default socket\n","import { createStore, applyMiddleware } from 'redux';\nimport thunkMiddleware from 'redux-thunk';\nimport reducers from '../reducers';\n\nexport default function configureStore() {\n  const createStoreWithMiddleware = applyMiddleware(thunkMiddleware)(createStore);\n  return createStoreWithMiddleware(reducers);\n}\n","import fetch from 'isomorphic-fetch';\nimport { polyfill } from 'es6-promise';\n\n\nconst defaultHeaders = {\n  Accept: 'application/json',\n  'Content-Type': 'application/json'\n};\n\nfunction buildHeaders() {\n  // fetch csrf token\n  const csrfToken = 'dsahdjkashdksahdj'  ;\n  return {...defaultHeaders, 'X-CSRF-TOKEN': csrfToken};\n}\n\nexport function checkStatus(response) {\n  if (response.status >= 200 && response.status < 300) {\n    return response;\n  } else {\n    var error = new Error(response.statusText);\n    error.response = response;\n    throw error;\n  }\n}\n\nexport function parseJSON(response) {\n  return response.json();\n}\n\nexport function httpGet(url) {\n  return fetch(url, {headers: buildHeaders(), credentials: 'same-origin'})\n         .then(checkStatus).then(parseJSON);\n}\n","import ReactDOM       from \"react-dom\";\nimport React          from \"react\";\nimport { Provider }   from \"react-redux\";\nimport socket from \"../socket\";\nimport { MiniCart, CartNotification }   from \"../components\";\nimport configureStore from \"../store\";\nimport cartActions    from \"../actions/cart\";\nimport CartNotificationListener from \"../listeners/cart_notification_listener\";\n\n\nexport default class BaseView {\n  mount() {\n    this.store = configureStore();\n    ReactDOM.render(<Provider store={this.store}>\n                        <MiniCart/>\n                    </Provider>,\n                    document.getElementById('cart'));\n\n    this.store.dispatch(cartActions.fetchCurrentCartSummary(this.setupListeners.bind(this)));\n  }\n\n  unmount() {\n  }\n\n  setupListeners() {\n    this.socket = socket;\n    socket.connect();\n    new CartNotificationListener(socket, this.store, {cart_id: this.store.getState().mini_cart.cart.cart_summary.id});\n  }\n}\n","import BaseView from \"../base_view\";\n\n\nexport default class BaseCheckoutView extends BaseView {\n  mount() {\n    super.mount();\n  }\n\n  unmount() {\n    super.unmount();\n  }\n}\n","import BaseCheckoutView from \"./base_checkout_view\";\nimport Payment from \"./payment\";\n\nexport default class CheckoutView extends BaseCheckoutView {\n  mount() {\n    super.mount();\n    const state = document.getElementById('order').getAttribute('data-order-state');\n    if (this[state]) { this[state](); }\n  }\n\n  tax() {\n    let braintreeForm = document.getElementById('braintree');\n    if (braintreeForm) {\n      const braintreeClientToken = braintreeForm.getAttribute('data-client-token');\n      Payment.init({braintreeClientToken});\n    }\n  }\n}\n","import BaseCheckoutView from \"./base_checkout_view\";\nimport CheckoutView     from \"./checkout_view\";\n\nexport default function getView(actionName) {\n  switch(actionName) {\n  case \"checkout\":\n    return CheckoutView;\n  default:\n    return BaseCheckoutView;\n  }\n}\n","export default {\n  form: $('#payment-form > form'),\n\n  init: function({\n    braintreeClientToken\n  }) {\n    this.initializeBrainTreeClient(braintreeClientToken);\n    this.bindFormSubmissionListner();\n  },\n\n  initializeBrainTreeClient: function(clientToken) {\n    this.brainTreeClient = new braintree.api.Client({\n      clientToken\n    });\n  },\n\n  bindFormSubmissionListner: function() {\n    this.form.submit((event) => {\n      if (this.isBrainTreePayment() && !this.noncePresent()) {\n        event.preventDefault();\n        this.tokenizeCard();\n      } else {\n        this.form.off('submit').submit();\n      }\n    });\n  },\n\n  tokenizeCard: function() {\n    let brainTreeForm = this.form.find('.payment-form[data-for=braintree]');\n    let number = brainTreeForm.find('input[name=\"order[payment_method][braintree][card_number]\"]').val();\n    let expirationDate = brainTreeForm.find('select').map((idx, val) => val.value).toArray().join(\"/\");\n    let _this = this;\n    this.brainTreeClient.tokenizeCard({\n        number, expirationDate\n      },\n      function(err, nonce) {\n        if (err) {\n          alert(err);\n          return;\n        }\n\n        let nonce_input = $(\"<input>\").attr(\"type\", \"hidden\").attr(\"name\", \"order[payment_method][braintree][nonce]\").val(nonce);\n        _this.form.append($(nonce_input));\n        _this.form.off('submit').submit();\n      });\n  },\n\n  isBrainTreePayment: function() {\n    let checked = $(this.form.find(\"input[type=checkbox]\").filter((_, checkbox) => checkbox.checked));\n    return checked.closest('.payment-form').data('for') == 'braintree';\n  },\n\n  noncePresent: function() {\n    return !!this.form.find('input[name=\"order[payment_method][nonce]\"]').val();\n  }\n};\n","import BaseView          from \"./base_view\";\nimport ProductView       from \"./products\";\nimport CheckoutView      from \"./checkout\";\n\n// add all the views here.\nconst views = {\n  ProductView,\n  CheckoutView,\n};\n\nexport default function viewToRender(view) {\n  let viewLookUp   = view.split(\".\");\n  const actionName = viewLookUp.pop();\n  const viewName   = viewLookUp.join(\"\");\n  let actionLookup = views[viewName];\n\n  if (actionLookup) {\n    return actionLookup(actionName);\n  } else {\n    if (viewLookUp[0] == 'Admin') {\n      return AdminBaseView;\n    } else {\n      return BaseView;\n    }\n  }\n}\n","import BaseView from \"../base_view\";\n\n\nexport default class BaseProductView extends BaseView {\n  mount() {\n    super.mount();\n  }\n\n  unmount() {\n    super.unmount();\n  }\n}\n","import IndexView from \"./index_view\";\nimport BaseProductView from \"./base_product_view\";\n\nexport default function getView(actionName) {\n  switch(actionName) {\n  case \"index\":\n    return IndexView;\n  default:\n    return BaseProductView;\n  }\n};\n","import BaseProductView from \"./base_product_view\";\n\n\nexport default class IndexView extends BaseProductView {\n  mount() {\n    super.mount();\n  }\n\n  unmount() {\n    super.unmount();\n  }\n}\n"]}